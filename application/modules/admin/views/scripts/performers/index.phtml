<?php if(!$this->performers){?>
<h2>Не найдено ниодного исполнителя</h2>
<?php }else {?>
<table id="performersTable" class="table table-striped table-bordered" cellspacing="0" width="100%">
        <thead>
            <tr>
                <th>ФИО</th>
                <th>Номер телефона</th>
                <th>Город</th>
                <th>Возраст</th>
                <th>Балланс</th>
                <th>Банн</th>
                <th>Удаление</th>
            </tr>
        </thead>    
 
        <tfoot>
            <tr>
                <th>ФИО</th>
                <th>Номер телефона</th>
                <th>Город</th>
                <th>Возраст</th>
                <th>Балланс</th>
                <th>Банн</th>
                <th>Удаление</th>
            </tr>
        </tfoot>
        <tbody>
    <?php foreach($this->performers as $performer){?>
            <tr id="div<?= $performer['id'] ?>" <?php if($performer['banned'] == 1 ){?> class="danger" <?php } ?>>
                <td><a href="<?= $this->baseUrl().'/admin/performers/view/id/'.$performer['id'] ?>"><?=  $performer['username'].' '.$performer['surname'] ?></a></td>
                <td><?=  $performer['phonenumber'] ?></td>
                <td><?=  $performer['city'] ?></td>
                <td>28</td>
                <td>balans</td>
                <td>
                     <?php if($performer['banned'] == 0){?>
                           <button id="bann<?= $performer['id'] ?>" onclick="bann(<?= $performer['id'] ?>)">Забанить</button>
                           <button id="unbann<?= $performer['id'] ?>" style="display: none" onclick="unBann(<?= $performer['id'] ?>)">Разбанить</button>
                     <?php }else{ ?>
                           <button id="unbann<?= $performer['id'] ?>" onclick="unBann(<?= $performer['id'] ?>)">Разбанить</button>
                           <button id="bann<?= $performer['id'] ?>" style="display: none" onclick="bann(<?= $performer['id'] ?>)">Забанить</button>
                     <?php } ?>
                </td>
                <td>
                     <button id="remove<?= $performer['id'] ?>" onclick="removeUser(<?= $performer['id'] ?>)">Удалить</button>
                     <img style="display: none" id="remPrel<?= $performer['id'] ?>" src="<?= $this->baseUrl()?>/images/blue_preloader.gif" width="50"> 
                </td>
            </tr>

    <?php } ?>
 </tbody>
</table>
<?php } ?>
<script>
    $(document).ready(function(){
        $('#performersTable').DataTable();
    });
    function removeUser(id){
       
    if(confirm('Вы готовы безвозвратно удалить этого пользователя?')){
        $('#remove'+id).hide();
        $('#remPrel'+id).show();
        $.ajax({
        type: 'POST',
        url: '<?= $this->baseUrl.'/admin/performers/remove/'; ?>',
        data: {id: id},
        success: function(data){
           $('#div'+id).remove();
  }
}); 
}
    }
    
    function bann(id){
$.ajax({
  type: 'POST',
  url: '<?= $this->baseUrl.'/admin/performers/bann/'; ?>',
  data: {id: id},
  success: function(data){
      $('#bann'+id).hide();
      $('#unbann'+id).show();
      $('#div'+id).addClass('danger');
  }
});       
    }
    function unBann(id){
$.ajax({
  type: 'POST',
  url: '<?= $this->baseUrl.'/admin/performers/unbann/'; ?>',
  data: {id: id},
  success: function(data){
      $('#bann'+id).show();
      $('#unbann'+id).hide();
      $('#div'+id).removeClass('danger');
  }
});       
    }
</script>    