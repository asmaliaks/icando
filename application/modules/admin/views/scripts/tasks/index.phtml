<table id="taskTable" class="table table-striped table-bordered table-responsive" cellspacing="0" width="100%">
        <thead>
            <tr>
                <th>Создана</th>
                <th>Название</th>
                <th>Заказчик</th>
                <th>Исполнитель</th>
                <th>Статус</th>
                <th>Удалить</th>
            </tr>
        </thead>    
 
        <tfoot>
            <tr>
                <th>Создана</th>
                <th>Название</th>
                <th>Заказчик</th>
                <th>Исполнитель</th>
                <th>Статус</th>
                <th>Удалить</th>
            </tr>
        </tfoot>
        <tbody>
<?php foreach($this->taskList as $task){?>
     <tr id="div<?= $task['id'] ?>">
         <td>
             <?= date("d.m.y", $task['created_at']); ?>
         </td>
       <td>
           <a href="<?= $this->baseUrl().'/admin/tasks/view/id/'.$task['id']?>">
                <?= $task['title']?>
           </a>    
       </td>
       <td>
           <a href="<?= $this->baseUrl().'/admin/customers/view/id/'.$task['customer_id'] ?>">
                <?= $task['cust_username']." ".$task['cust_surname'] ?>
           </a>
       </td>
       <td>
           <?php if($task['performer_id']){?>
                <a href="<?= $this->baseUrl().'/admin/performers/view/id/'.$task['performer_id'] ?>">
                    <?= $task['per_username']." ".$task['per_surname'] ?>
                </a>
           <?php }else{ ?>
           Не назначен
           <?php }?>
       </td>
       <td>
           <?php switch ($task['status']){
               case "non_taken":
                   echo 'не назначена';
                   break;
               case "taken":
                   echo 'в работе';
                   break;
               default:
               echo "не определен";
               break;
           }?>
       </td>
       <td>
           <button onclick="removeTask(<?= $task['id'] ?>)" id="removeBut<?= $task['id'] ?>" class="btn btn-primary btn-xs">Удалить</button>
           <img id="preloader<?= $task['id'] ?>" src="<?= $this->baseUrl().'/images/blue_preloader.gif' ?>" style="display: none" width="50" >
       </td>
     </tr>   
<?php } ?>
 </tbody>
</table>
<script>
        $(document).ready(function(){
        $('#taskTable').DataTable();
    });
function removeTask(id){
    $('#removeBut'+id).remove();
    $('#preloader'+id).show();
$.ajax({
  type: 'POST',
  url: '<?= $this->baseUrl.'/admin/tasks/remove-task/'; ?>',
  data: {id: id},
  success: function(data){
    
    $('#div'+id).remove();
  }
});
}
</script>
